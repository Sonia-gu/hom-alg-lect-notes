\documentclass[../main.tex]{subfiles}
\begin{document}
\section{Спектральные последовательности}
Работаем, например, в категории $Kom(A)$. Будем говорить, что на объекте $A$ задана убывающая регулярная фильтрация, то есть цепочка вложенных друг в друга подобъектов $A \supset \ldots F^p A \supset F^{p+1}A \supset \ldots$, регулярность означает, что:
\begin{itemize}
    \item $\bigcap F^p A = 0$ \item  $\bigcup F^p A = A$
\end{itemize}
Тогда по такой последовательности можно построить \textbf{градуировочный фактор} $E^p = F^p A / F^{p+1} A$.
"Пристёгивание" факторов к подмодулю будем обозначать как $F^N \sqsupset E^{N-1} \sqsupset E^{N-2}\sqsupset\ldots$.
\textbf{Вопрос:} если известны все градуировочные факторы фильтрации, можем ли мы восстановить наш исходный объект?
\begin{to_def}
Спектральной последовательностью является набор данных, состоящий из 
\begin{itemize}
\item стопки листов с занумерованными клетками, в которых находятся объекты категории\footnote{$r$ -- номер листа, а $pq$ -- номер клетки}
\item дифференциала между объектами листа \footnote{бьёт обобщённым ходом коня, на нулевом шаге он бьёт вправо, потом вверх, а потом всегда попадает на соседнюю диагональ}
\item изоморфизма между когомологиями и следующим листом\footnote{на каждом следующем листе стоят когомологии предыдущего, дифференциалы на каждом следующем листе индуцированы}
\item изоморфизма между пределом когомологий на трансфинитном листе и градуировочными факторами фильтрации
\item объект на котором задана фильтрация 
\end{itemize}
\[(E^{pq}_r, E^n, d^{pq}_r, \alpha^{pq}_r, \beta^{pq})\]
\[d^{pq}_r&\colon E^{pq}_r\to E^{p+r, q-r+1}_r  \]
\begin{align*}
    \alpha_r^{pq}\colon H^{pq}_r(E_r^{\bullet\bullet}) \to E^{pq}_{r+1}
\end{align*}
Начиная с некоторого листа для любого члена все дифференциалы, которые бьют из него и в него зануляются, то есть
\begin{align*}
\forall (p, q) \quad \exists r_0\colon \forall r\ge r_0 \quad \hookrightarrow  \quad d^{pq}_r = 0 \quad d_r^{p-r, q+r-1}=0     
\end{align*}
Это означает, что когомологии с этого момента перестают меняться, а последовательность стабилизируется.\\
$E^n$ -- это комплекс, на котором задана убывающая регулярная фильтрация $\ldots \supset \ldots F^p E^n \supset F^{p+1} E^n \supset \ldots$.
\begin{align*}
    E^{pq}_{r_0}&\cong E_{\infty}^{pq}\\
    \beta^{pq}&\colon E_{\infty}^{pq} \to F^{p} E^{p+q} / F^{p+1} E^{p+q}
\end{align*}
\textbf{Спектральная последовательность сходится к градуировочным факторам фильтрации.} 
\end{to_def}
$\NB$ Знание градуировочных факторов фильтрации не позволяет восстановить объект. Однозначности восстановления нет. 
\subsection{Лирическое отступление}
Есть три основных источника спектральных последовательностей 
\begin{itemize}
    \item Спектральная последовательность фильтрованного комплекса
    \item Спектральная последовательность двойного комплекса
    \item Спектральная последовательность точной пары \footnote{Хатчер, Алгебраическая топология}
\end{itemize}
\subsection{Фильтрованный комплекс}
Можем рассмотреть два варианта фильтрации комплекса $K^\bullet$:
\begin{itemize}
\item \textit{Глупая фильтрация}
\[
\widetilde{F}_p K^n = \begin{cases} 0, &n < p \\ K^n, & n \ge p \end{cases}
\]
\[
H^n(\widetilde{F}^p K^n) = \begin{cases} 0, &n < p\\ \ker d^p, & n=p \\ K^n, & n > p \end{cases}
\]
\bee
\begin{tikzcd}[sep=small]
\ldots \arrow[r]\arrow[d]& 0 \arrow[r]\arrow[d]& 0\arrow[r]\arrow[d]& K^{n+1} \arrow[r] \arrow[d]&\ldots\\
\ldots \arrow[r]\arrow[d]& K^{n-1} \arrow[r]\arrow[d]& K^{n}\arrow[r]\arrow[d]& K^{n+1} \arrow[r] \arrow[d]&\ldots\\
\ldots \arrow[r]& K^{n-1} \arrow[r]& K^{n}\arrow[r]& 0 \arrow[r]&\ldots\\
\end{tikzcd}
\eee
\item \textit{Каноническая фльтрация}
\[
F_p K^n = \begin{cases} K^n, &n < -p \\ \ker d^{-p}, & n = -p \\ 0, & n>-p \end{cases}
\]
\[
H^n (F^p K^\bullet) \begin{cases} 0, &n > -p \\ H^n(K^\bullet), & n\le-p \end{cases}
\]
\bee
\begin{tikzcd}[sep=small]
\ldots \arrow[r]\arrow[d]& K^{-p-1} \arrow[r]\arrow[d]& \ker d^{-p}\arrow[r]\arrow[d]& 0 \arrow[r]\arrow[d]&0\ldots\\
\ldots \arrow[r]\arrow[d]& K^{-p-1} \arrow[r]\arrow[d]& K^{-p}\arrow[r]\arrow[d]& \ker d^{-p+1} \arrow[r]\arrow[d]&0\ldots\\
\ldots \arrow[r]\arrow[d]& K^{-p-1} \arrow[r]\arrow[d]& K^{-p}\arrow[r]\arrow[d]& \ker K^{-p+1} \arrow[r]\arrow[d]& \ker d^{-p+2}\ldots\\
		\ldots&		\ldots	&	\ldots		&\ldots &\\
\ldots \arrow[r]& K^{-p-1} \arrow[r]& K^{-p}\arrow[r]& K^{-p+1} \arrow[r]&K^{-p+2} \ldots
\end{tikzcd}
\eee
\end{itemize}
Отметим, что дифференциал \textit{"не понижает градус фильтрации"}, т. е.  $d(F^p K^n)\subset F^p K^{n+1}$.\footnote{\textbf{filtration respects differentiall structure}}
\begin{to_ex}[Cпектральная последовательность фильтрованного комплекса]
Для фильтрованного комплекса существует спектральная последовательность. 
\end{to_ex}
Определим следующие группы элементов комплекса: \ref{eq:cicle} группа элементов, лежащих в $F^{p}K^{p+q}}$ члене фильтрации, у которых дифференциал углубляет фильтрационный номер не более чем на $r$,  \ref{eq:cicle2} элементы, у которых номер фильтрации углубляется более чем на $r$ при применении дифференциала и границы \ref{eq:bound}. C помощью этих элементов мы определим элементы спектральной последовательности по формуле \ref{eq:specfiltr}.\be\label{eq:cicle}
Z_r^{pq} = d^{-1}(F^{p+r}K^{p+q+1})\bigcap F^p K^{p+q}
\ee
\be\label{eq:cicle2}
Z^{p+1; q-1}_{r-1} = d^{-1}(F^{p+r}K^{p+q+1})\bigcap F^{p+1}K^{p+q}
\ee
\be\label{eq:bound}
d (Z_{r-1}^{p-r+1, q+r-2}) = d( F^{p-r+1}K^{p+q+1})\bigcap F^p K^{p+q+1}
\ee
\be\label{eq:specfiltr}
E^{pq}_r = \dfrac{Z_r^{pq}}{Z^{p+1, q-1}_{r-1} + dZ_{r-1}^{p-r+1, q+r-2}}
\ee
Утверждается, что спектральная последовательность, заданная элементами вида  \ref{eq:specfiltr} будет сходиться к градуировочным факторам фильтрации комплекса. Отметим также, что нулевой лист спектральной последовательности будет иметь вид:
\bee
E_0^{pq} = F^p K^{p+q} / F^{p+1}K^{p+q}
\eee
Чтобы это проверить нужно установить следующее:
\begin{itemize}
    \item Дифференциал корректно определён\footnote{Дифференциалы на когомологиях спектральной последовательности не могут быть восстановлены по начальным листам, на которых дифференциал унаследован из исходной фильтрации. Если известны первые несколько листов спектральной последовательности, то могут быть построены члены следующих листов, но не их дифференциалы.}
    \item Существую изоморфизмы между когомологиями на соседних листах
    \be\label{eq:Z}
   	\dfrac{Z^{pq}_{r+1} + Z^{p+1, q-1}_{r-1}}{Z_{r-1}^{p+1, q-1} + dZ_{r-1}^{p-r+1, q+r-2}}\quad\to\quad \mathcal{Z}(E_r^{pq})
\ee
\be\label{eq:B}
    \dfrac{dZ^{p-r, q+r-1}_{r} + Z^{p+1, q-1}_{r-1}}{Z_{r-1}^{p+1, q-1} + dZ_{r-1}^{p-r+1, q+r-2}}\quad\to\quad \mathcal{B}(E_r^{pq})
    \ee
    \item Группы корректно определены, то есть 
    \[\mathcal{Z}(E_r^{pq})/\mathcal{B}(E_r^{pq}) = E^{pq}_{r+1}\]
\end{itemize}
Проверка происходит руками и с большим количеством индексов. Поехали...
\begin{itemize}
\item[1]\textit{Определение дифференциала}\footnote{Обратим внимание, что для заданных групп для дифференциала на комплексе не выполнено $d^2=0$, в отличие от дифференциала на листах }
Дифференциал исходного комплекса индуцирует дифференциал на листах, то есть:
\[d_r^{pq}\colon E_r^{pq} \to E_r^{p+r, q-r+1}\]
\[dZ_r^{pq}\subset Z_r^{p+r, q-r+1}\]
\item[2]\textit{Изоморфизм между когомологиями}
\ref{eq:Z} и \ref{eq:B} являются мономорфизмами, так как в числителе стоят подгруппы $Z^{pq}_r$, а фактор берётся по одним и тем же подгруппам. Теперь выпишем явно циклы. В них будут те элементы, по которым берётся фактор на следующем шаге, отфакторизованный по подгруппам из предыдущего шага 
\[
\mathcal{Z}(E^{pq}_r)=\dfrac{Z_r^{pq}\overset{{\color{green}\mathbf{(2)}}}{\bigcap} d^{-1}\left(Z_{r-1}^{p+r+1, q-2}+dZ_{r-1}^{p+1, q-1}\right)^{\color{green}\mathbf{(1)}}}{Z_{r-1}^{p+r+1, q-r} + dZ_{r-1}^{p-r+1, q+r-2}}
\]
Выполняем "по действиям":
\begin{align*}
{\color{green}\mathbf{(1)}}\quad& d^{-1}\left(Z_{r-1}^{p+r+1, q-r}+dZ_{r-1}^{p+1, q-1}\right) = d^{-1}\left(Z_{r-1}^{p+r+1, q-r}\right)+Z_{r-1}^{p+1, q-1}\\
{\color{green}\mathbf{(2)}} \quad& Z_r^{pq}\bigcap \left(d^{-1}\left(Z_{r-1}^{p+r+1, q-r}\right)+Z_{r-1}^{p+1, q-1}\right) = Z_{r-1}^{p+1, q-1}+Z_r^{pq}\overset{{\color{green}\mathbf{(3)}}}{\bigcap} d^{-1}Z_{r-1}^{p+r+1, q-r}\\
{\color{green}\mathbf{(3)}} \quad&Z_r^{pq}\bigcap d^{-1} Z_{r-1}^{p+r+1, q-r} = \left( d^{-1}\left(F^{p+r}K^{p+q+1}\right)\bigcap F^p K^{p+q} \right)\bigcap d^{-1}\left(Z_{r-1}^{p+r+1, q-r}\right)
  &\subset d^{-1}\left(F^{p+r+1}K^{p+q+1}\right)\bigcap F^pK^{p+q}\\
  &&\subset Z_{r+1}^{pq}
\end{align*}
Таким образом, для любого элемента цикла нашёлся элемент в факторе, то есть \ref{eq:Z} также является эпиморфизмом. Аналогично и \ref{eq:B} будет эпиморфизмом. Таким образом, заданные отображения действительно будут изоморфизмами.
\item[3]\textit{Корректность определения подгрупп для изоморфизма.}
Хотим показать, что фактор левой части \ref{eq:Z} по левой части \ref{eq:B} это действительно когомологии, то есть из этих отображений действительно получается изоморфизм когомологий и членов спектральной последовательности следующего листа \ref{eq:specfiltr}. 
\begin{align*}
\alpha_r^{pq}\colon H(E_r^{pq})\overset{\conq}{\to} E_{r+1}^{pq}
\end{align*}
%\begin{align*}
%E_{r+1}^{pq} = \dfrac{Z^{pq}_{r+1}}{Z_r^{p+1, q-1}+dZ_r^{p-r, q+r-1}}
%\end{align*}
\begin{align*}\label{eq:factorZpoB}
\dfrac{Z_{r+1}^{pq}+Z_{r-1}^{p+1, q-1}}{Z_{r-1}^{p+1, q-1}+dZ_{r}^{p-r, q+r-1}}= \dfrac{ Z_{r+1}^{pq} }
{\underset{ = Z_r^{p+1, q-1}}{\underbrace{ Z_{r+1}^{pq}\bigcap(Z_{r-1}^{p+1, q}} } +\underset{\subset Z_{r+1}^{pq}} {\underbrace{dZ_{r}^{p-r, q+r-1}}})} = \dfrac{Z_{r+1}^{pq}}{Z_r^{p+1, q-1}+dZ_r^{p-r, q+r-1}} \overset{\text{ура!}}{=}E_{r+1}^{pq}
\end{align*}
\end{itemize}
Если фильтрация конечна на каждом $K^n$, то спектральная последовательность сходится к градуировочным факторам когомологий:
\begin{align*}
&E_{\infty}^{pq} = \dfrac{Z_r^{pq}}{Z_{r-1}^{p+1, q-1}}, \qquad
Z_r^{pq} = \mathcal{Z}(F^p K^{p+q}), \qquad
Z_{r-1}^{p+1, q-1} = \mathcal{Z}(F^{p+1}K^{p+q}),\qquad \underset{p+q=n}{\oplus}E_{\infty}^{pq} = \oplus \mathbf{Gr} H^n (K^\bullet),\qquad \text{при } r > r_0.
\end{align*}
\begin{to_ex}[Cпектральная последовательность комплекса с "глупой" фильтрацией]
\begin{align*}
Z^{pq}_r= \begin{cases} 0, & q<0 \\ \ker d^{p+q}, & q\ge 0\quad r< q+1\\ K^{p+q}, &q\ge 0 \quad r\ge q+1 \end{cases}
\\ \\
E_r^{pq}=\begin{cases} 0, & q \neq 0 \\ K^p, & q = 0 \quad r=1\\ H^p(K^\bullet) & q=0 \quad r\ge 2 \quad q=0 \quad r = \infty\end{cases}\\
\\
E_r^{pq} \Rightarrow E^n = H^n(K^\bullet)\\
F^pE^n = \begin{cases} E^n & p\le n \\ 0 &p > n\end{cases}
\end{align*}
\end{to_ex} 
\begin{to_ex}[Cпектральная последовательность комплекса с канонической фильтрацией]
\begin{align*}
E_1^{pq} = \begin{cases} H^p(K^\bullet), & q = -2p \\ 0 & q \neq -2p \end{cases}\\
E^{pq}_{r} = E^{pq}_{\infty}= E_1^{pq} \qquad d_r = 0 \qquad \forall r\ge 1\\
E^n = H^n(K^\bullet) \qquad F^pE^n = \begin{cases} E^n & n \le -p \\ 0 & n>-p \end{cases}
\end{align*}
\end{to_ex}
\subsection{Двойной комплекс}
\bee
\begin{tikzcd}
    & \arrow[d]&\arrow[d] &\arrow[d] & \\
    0&\arrow[l]K^{01}\arrow[d]& K^{11}\arrow[l]\arrow[d]&K^{21}\arrow[l]\arrow[d]&\arrow[l]\\
    0&\arrow[l]K^{00}\arrow[d]& K^{10}\arrow[l]\arrow[d]&K^{20}\arrow[l]\arrow[d]&\arrow[l]\\
     & 0 & 0 & 0 &
\end{tikzcd}
\eee
\begin{to_def}\label{double_complex}
Двойной комплекс $K^{pq}$ \footnote{$p$-- горизонтально, $q$ -- вертикально} состоит из "матраса" объектов и двух дифференциалов -- вертикального и горизонтального. Помимо стандартного  $d^2=0$ также требуют, чтобы эти дифференциалы антикоммутировали.
\[d^{\rightarrow}\colon K^{pq}\to K^{p+1, q}\]
\[d^{\uparrow}\colon K^{pq}\to K^{p, q+1}\]
\[d^{\rightarrow}d^{\uparrow} + d^{\uparrow}d^{\rightarrow} = 0\]
\[(d^{\rightarrow})^2 = (d^{\uparrow})^2 = 0\]\footnote{так определённые дифференциалы вообще говоря не являются морфизмами комплексов, однако соглашение о знаках гарантирует, что индуцированный дифференциал в тотальном комплексе будет корректно определён, т. е. $(d^v + d^h)^2 = d^v^2 + d^h^2 + d^v d^h + d^h d^v = 0 $}
\end{to_def}
\begin{to_def}
Определим тотальный комплекс двойного комплекса как:
\[Tot^{\oplus}(K^{\bullet\bullet})^n = \underset{p+q=n}{\oplus}K^{pq}\]
\[Tot^{\prod}(K^{\bullet\bullet})^n = \underset{p+q=n}{\prod}K^{pq}\]
\end{to_def}
\begin{to_claim}
Если комплекс находится в первом квадранте, то все суммы и произведения по диагоналям будут конечными, что в абелевой категории влечёт:
\[Tot^{\oplus} \cong Tot^{\prod}\]
\end{to_claim}
Докажем следующее утверждение для двойного комплекса пока без использования спектральной последовательности:
\begin{to_claim}\label{ac_tot}
Пусть $K^{\bullet\bullet}$ -- ограничен (лежит в первом квадранте), а его строки \underline{или} столбцы ацикличны. Тогда $Tot(K)^\bullet$ -- ацикличен.
\end{to_claim}
\begin{proof}
Возьмём некоторый элемент диагонали $(z_0, z_1, z_2, \ldots, z_n)$ принадлежащий границам и покомпонентно распишем действие дифференциала в тотальном комплексе покомпонентно, полагая столбцы точными. 
\begin{align*}
    &d(z_0, z_1, z_2, \ldots z_n) = 0\\
    &d^h z_0 + d^v z_1 = 0\\
    &d^h z_1 + d^v z_2 = 0\\
    &\ldots\\
    &d^v z_n + dz_{n-1} = 0\footnote{в силу конечность суммы}
\end{align*}
Нужно поднять эти элементы на диагональ выше
\begin{align*}
    &b_0 \ldots b_{n+1}\\
    &K^{20}\ni b_0 = 0\\
    &K^{10}\ni d^h(b_0) = z_0\\
    &\exists b_1\colon d^v (b_1) = z_0 \\
    &d^v(z_1 - d^h b_1) = d z_1 + d^h d^v b_1 = d^v z_1 + d^h z_0 = 0 \quad \Rightarrow \quad \exists b_2 \colon d^v b_2 = z_1 - d^h b_1
\end{align*}
В силу конечности комплекса, итерационный процесс закончится. И, продолжая далее по индукции, мы получаем поднятие диагонали.\end{proof}
Рассмотрим два примера, когда один из тотальных комплексов оказывается неточным:
\begin{to_ex}[$Tot^{\oplus}$ -- точен, $Tot^{\prod}$ -- нет]
Ниже изображены два комплекса: $L_1^{\bullet\bullet}$ с точными столбцами и $L_2^{\bullet\bullet}$ с точными строками.
\bee
\begin{tikzcd}
L_1^{\bullet\bullet} &&&&\\
\ldots &\arrow[l]\Z &\arrow[l]\underset{{\color{green}1,-2}}{\Z}\arrow[d]&\arrow[l]0\arrow[d]& \arrow[l]0\arrow[d]\\
\ldots &\arrow[l]0 &\arrow[l]\underset{{\color{green}1,-1}}{\Z}\arrow[d]&\arrow[l]\underset{{\color{green}0,-1}}{\Z}\arrow[d]& \arrow[l]0\arrow[d]\\
\ldots &\arrow[l]0 &\arrow[l]0 \arrow[d]&\arrow[l]\underset{{\color{green}0,0}}{\Z}\arrow[d]& \arrow[l]0\arrow[d]\\
\ldots &\arrow[l]0 &\arrow[l]0 &\arrow[l]0& \arrow[l]0\\
\end{tikzcd}
\eee
В первом случае рассмотрим тотальный комплекс суммы $Tot^{\oplus}(L_1)$. Элемент $(1, 0, 0, \ldots)\in Tot^{\oplus}(L_1)^0$ поднимается только до $(1, -1, 1, \ldots)$, но в тотальном комплексе все элементы конечны, нарушена сюръективность и $Tot^{\oplus}(L_1)$ -- не точен.
\bee
\begin{tikzcd}
L_2^{\bullet\bullet} &&&&&\\
\ldots &\arrow[l]\Z &\arrow[l]\arrow[d]\Z &\arrow[l]\arrow[d]0& \arrow[l]\arrow[d]0& \arrow[l]0\arrow[d]\\
\ldots &\arrow[l]0 &\arrow[l]\arrow[d]\Z &\arrow[l]\arrow[d]\Z& \arrow[l]\arrow[d]0& \arrow[l]0\arrow[d]\\
\ldots &\arrow[l]0 &\arrow[l]0 &\arrow[l]\Z& \arrow[l]\Z& \arrow[l]0\\
\end{tikzcd}
\eee
Теперь рассмотрим тотальный комплекс произведения $Tot^{\prod}(L_2)^0$. В члене нулевой градуировки содержится ненулевой элемент $(1, -1, 1, \ldots)$, который переходит в ноль, нарушена инъективность $Tot^{\prod}(L_2)$ -- не точен.
\end{to_ex}
Введённая конструкция тотального комплекса позволяет свести построение спектральной последовательности двойного комплекса к случаю спектралной последовательности фильтрованного комплекса. Существует две стандартные фильтрации тотального комплекса, индуцирующие фильтрацию двойного комплекса -- по строкам и по столбцам:
\begin{align*}
    F^p Tot (L)^n = \myunder[]{\bigoplus}{i+j = n\\ i\ge p}L^{ij}\\
    F^q Tot (L)^n = \myunder[]{\bigoplus}{i+j = n\\ j\ge q}L^{ij}
\end{align*}
\begin{to_claim}\label{HHtot}
Существует спектральная последовательность с $E_2^{pq} = H_I^{q}(H_{II}^p(L^{\bullet\bullet}))$, сходящаяся к $H^{p+q}(Tot(L^{\bullet\bullet}))$.\footnote{На самом деле две спектральные последовательности, соответствующие двум различным фильтрациям. На нулевом листе этих последователностей стоит просто сам двойной комплекс, но с нулевым горизонтальным или вертикальным дифференциалом. На первом листе остаются соответствующие когомологии с отображениями, индуцированными "перпендикулярным" дифференциалом.}
\end{to_claim}
С использованием спектральной последовательности утверждение \ref{ac_tot} получается моментально: если точны, например, строки -- спектральная последовательность соответствующая фильтрации по ним вырождается на первом листе, а из \ref{HHtot} нам известно, что она сходится к когомологиям тотального комплекса, то есть он ацикличен.
\begin{to_ex}[Балансировка $Tor$]
$Tor(A, B)\cong Tor(B, A)$.\footnote{Это утверждение может быть доказано и без спектральной последовательности, так как для вычисления производного для точного справа по первому сомножителю можно выписать проективные резольвенты, а для точного слева инъективные.}
\end{to_ex}
\bee\label{tens}
\begin{tikzcd}
    0& P_0\otimes Q_2 \arrow[l]\arrow[d] & P_1\otimes Q_2 \arrow[l]\arrow[d] & P_2\otimes Q_2 \arrow[l]\arrow[d]\\
    0& P_0\otimes Q_1 \arrow[l]\arrow[d] & P_1\otimes Q_1 \arrow[l]\arrow[d] & P_2\otimes Q_1 \arrow[l]\arrow[d]\\
    0& P_0\otimes Q_0 \arrow[l]& P_1\otimes Q_0 \arrow[l] & P_2\otimes Q_0 \arrow[l]
\end{tikzcd}
\eee
Выберем две проективные резолвенты: $P_\bullet \to A$ и $Q_\bullet \to B$. Перемножим эти резольвенты и получим двойной комплекс $(P_\bullet \otimes Q_\bullet)_{ij} = P_i\otimes Q_j$. Мы теперь знаем, то такому комплексу соответствуют две спектральные последовательности, сходящиеся к когомологиям тотального комплекса $Tot(P\otimes Q)$. Из \ref{projisflat} следует, что функтор $P\otimes(\text{-})$ -- точный, а значит, его можно выносить за знак когомологий, то есть $H^{pq}(P_\bullet\otimes Q) = P_\bullet\otimes(H^q(Q))$.  Поэтому вторые страницы спектральных последовательностей будут:
\begin{align*}
^I E_r^{pq} &= \begin{cases}H^{pq}(P\otimes B) =\mathcal{L}^p(\otimes B)(A),& q = 0\\ 0,& \tetx{иначе}  \end{cases}\\
^{II} E_r^{pq} &= \begin{cases}H^{pq}(A\otimes Q) =\mathcal{L}^q(A \otimes)(B),& q = 0\\ 0,& \tetx{иначе}  \end{cases}\\
\end{align*}
То есть из сходимости, мы получаем требуемое:
\begin{align*}
E_r^{pq} \Rightarrow Tor^{p+q}(A, B) \cong Tor^{p+q}(B, A)
\end{align*}
\begin{to_suj}[Спектральная последовательность Кюннета\footnote{Künneth}]
Пусть $P^{\bullet}$ -- ограниченный снизу комплекс плоских $R$-модулей, а $M$ -- произвольный $R$-модуль. Тогда существует сходящаяся с. п.:
\begin{align*}
    E_{pq}^2 = Tor_p(H_q(P),M)\quad \Rightarrow \quad H_{p+q}(P \otimes M)
\end{align*}
\end{to_suj}
\begin{proof}
Пусть $Q_\bullet \to M$ -- плоская резольвента. Рассмотрим снова двойной комплекс $(P_\bullet\otimes Q_\bullet)_{ij}$. Рассмотрим сначала вертикальные когомологии и воспользуемся тем, что $P$ -- плоская, а $Q$ -- проективная резольвенты:
\begin{align*}
^{v}E_{pq}^1&=H_q^{v}(P\otimes Q) = P_p\otimes H_q(Q)\\
^{v}E_{pq}^2&=^{I}E_{pq}^{\infty} =\begin{cases} H_p(P\otimes M), & q = 0\\ 0, & \text{иначе}\end{cases}
\end{align*}
Мы получили, что такая спектральная последовательность сходится к $H_p(P\otimes Q) = H_p( P\otimes M)$. Рассмотрев горизонтальную фильтрацию, получим требуемое:
\begin{align*}
^{h}E_{pq}^1&= H_q(P)\otimes Q_p\\
^{h}E_{pq}^2&= H_p(H_q(P)\otimes Q) =Tor_p(H_q (P), M).
\end{align*}
\end{proof}
\begin{to_suj}[формула Кюннета]
Пусть дополнительно границы $d(P_\bullet)$ -- тоже плоские для $\forall n$. 
Тогда $\exists$ к. т. п.:
\bee
\begin{tikzcd}
    0 \arrow[r]& H_n(P)\otimes M \arrow[r]& H_n(P \otimes M)\arrow[r]& Tor_1(H_{n-1}(P), M) \arrow[r]& 0
\end{tikzcd}
\eee\footnote{То есть $Tor$ является мерой неточности выноса $M$ из-под когомологий.}
\end{to_suj}
\begin{proof}
Комплексу соответствуют две точные последовательности:
\bee
\begin{tikzcd}
0\arrow[r]& d(P_{p+1}) \arrow[r]&\mathcal{Z}_p\arrow[r]& H_p(P)\arrow[r]& 0
\end{tikzcd}
\eee
Так как $d(P_p)$ и $P_p$ -- плоские, то $\mathcal{Z}_p$ -- тоже плоский \footnote{из д.т.п. для $\otimes$ $(0\to\mathcal{Z}_p \to P_p\to d(P_p)\to 0)$}, то есть $H_p(P)$ имеет плоскую размерность $1$. В этом случае не нулевые только столбцы с $p=0, 1$, поэтому спектральная последовательность сходится на второй странице $E_2^{pq} = E^{\infty}_{pq}$ к градуировочным факторам фильтрации. Из 2-фильтрации $H_p(P\otimes Q)$ группой $H_p(P)\otimes M$ мы получаем формулу Кюннета:
\bee
\begin{tikzcd}
0 & 0 & \ldots & \ldots & 0 & 0\\
0 & 0 & H_q(P)\otimes M & Tor_1(H_q(P), M) & 0 & 0\\
0 & 0 & H_{q-1}(P)\otimes M & \underline{Tor_1(H_{q-1}(P), M)} & 0 & 0\\
0 & 0 & \ldots & \ldots & 0 & 0
\end{tikzcd}
\eee
\end{proof}
\begin{to_ex}
Пусть есть $R$, $S$ -- коммутативные кольца. $f\colon R \to S$. Пусть $A\in R$-$mod$, $B\in S$-$mod$. $\exists$ с. п. $E_r^{pq}=Tor_p^S(Tor_q^R(A; S); B) \Rightarrow Tor_{p+q}^R(A; B)$
\end{to_ex}
\begin{proof}
$P_\bullet\to A\to 0$ -- прроективная резольвента $A$ как $R$-$mod$. $Q_\bullet\to B\to 0$ -- прроективная резольвента $B$ как $S$-$mod$.
\bee\label{tens}
\begin{tikzcd}
    0& P_0\otimes_R Q_2 \arrow[l]\arrow[d] & P_1\otimes_R Q_2 \arrow[l]\arrow[d] & P_2\otimes_R Q_2 \arrow[l]\arrow[d]\\
    0& P_0\otimes_R Q_1 \arrow[l]\arrow[d] & P_1\otimes_R Q_1 \arrow[l]\arrow[d] & P_2\otimes_R Q_1 \arrow[l]\arrow[d]\\
    0& P_0\otimes_R Q_0 \arrow[l]\arrow[d] & P_1\otimes_R Q_0 \arrow[l]\arrow[d] & P_2\otimes_R Q_0 \arrow[l]\arrow[d]\\
    0& 0& 0&0
\end{tikzcd}
\eee
\begin{align*}
^{II}H_q(P_\bullet\otimes Q_p) = H_q(P_\bullet \otimes_R S \otimes_S Q_p) = H_q(P_\bullet \otimes_R S)\otimes_S Q_p = Tor_q^R(A, S)\otimesQ_p
\end{align*}
\begin{align*}
E_r^{pq} = Tor_p^S (Tor_q^R(A, S); B)
\end{align*}
\end{proof}
\end{document}
