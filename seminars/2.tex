\documentclass[../hw_main.tex]{subfiles}
\begin{document}
\section{Проективная резольвента, гомотопическая категория}
Вспомним, что в резольвенте \eqref{free_res_hilb} мы накрывали модуль свободным. Как мы увидели, категорным "аналогом" свободного модуля может быть проективный объект, причем утверждение \ref{projective_modules_criterion} говорит о том, что эти два понятия не совпадают. Введём понятие, необходимое для повторения процесса \eqref{equation_short_exact} в абстрактной категории.
\begin{to_def}
Говорят, что в категории достаточно много проективных (инъективных) объектов, если для любого объекта $A\in \mathcal{C}$ существует "накрывающий" его ("вкладывающийся" в него) проективный (инъективный) объект $P$ с эпиморфизмом $p:P \to A$ (мономорфизмом $p:A\to P$).
\end{to_def}
Видно, что в категории модулей проективных объектов достаточно много. Тогда процесс построения проективной (инъективной) резольвенты абсолютно аналогичен \eqref{free_res_hilb}. Опять же, верно аналогичное \ref{obj_res_eq} утверждение о том, что объект квазиизоморфен всем своим проективным резольвентам. Еще раз посмотрим на какой-нибудь пример проективной резольвенты.
\begin{to_ex}
Рассмотрим модули над кольцом $R=\mathbb{C}[x]$. Построим проективную резольвенту\footnote{Это частный пример т. н. \emph{резольвенты Козюля}} $\mathbb{C}$ как $R$-модуля.
\begin{equation*}
    \begin{tikzcd}
	0 & {\mathbb{C}[x]} & {\mathbb{C}[x]} & \mathbb{C} & 0
	\arrow[from=1-1, to=1-2]
	\arrow["x\cdot", from=1-2, to=1-3]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-4, to=1-5]
\end{tikzcd}
\end{equation*}
\end{to_ex}
\begin{to_ex}
Пример поинтереснее состоит в построении бесконечной проективной резольвенты. Положим $\A = \C[x]/(x^2)-mod$. Тогда одной из проективных резольвент $\C$ как $\C[x]/(x^2)$-модуля будет выглядеть следующим образом.
\begin{equation*}
    \begin{tikzcd}
	\ldots & {\C[x]/(x^2)} & {\C[x]/(x^2)} & \C & 0
	\arrow["x\cdot", from=1-1, to=1-2]
	\arrow["x\cdot", from=1-2, to=1-3]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-4, to=1-5]
\end{tikzcd}
\end{equation*}
\end{to_ex}
Последний примр мотивирует ввести следующее определение.
\begin{to_def}
Проективной размерностью объекта $\pd M$ называют длину его проективной резольвенты. Если объект не имеет конечной проективной резольвенты, то говорят, что $\pd M = \infty$.
\end{to_def}
Вспомним дуальное понятие инъективного объекта \ref{injective_def}. В отличие от проективных объектов, для них не существует общего аналога критерия \ref{projective_modules_criterion}. Попробуем рассмотреть инъективные объекты в категории модулей над кольцом $\Z$. В данной категории рассмотрим семейство объектов, являющихся группами. Оказывается, что все инъективные объекты в данном семействе исчерпываются \emph{делимыми группами}.
\begin{to_def}
Назовём $G$ делимой группой, если $\forall x\in G, n\in \N \exists y\in G: ny = x$.
\end{to_def}
\begin{to_suj}
$G$ --- инъективный $\Z$-модуль $\iff$ $G$ --- делимая группа.
\end{to_suj}
\begin{proof}
($\Rightarrow$) Пусть $G$ не делимая. Попытаемся поднять некоторый морфизм $f:\Z\to G$ до морфизма $\!\to G$ с естественным вложением $i:\Z \to \Q$.
\begin{equation*}
\begin{tikzcd}
	& G \\
	\Z & \Q
	\arrow["i", hook, from=2-1, to=2-2]
	\arrow["f", from=2-1, to=1-2]
	\arrow[dashed, from=2-2, to=1-2]
\end{tikzcd}
\end{equation*}
Раз $G$ не делимая, то существуют $x \in G, n \in \Z$ такие, что $\forall y \in G$ $nx \ne y$. В качестве морфизма $f$ возьмём тот, что отправляет единичный элемент в найденный $x$. Тогда существование искомого морфизма $g:\Q \to G$ невозможно. Действительно, тогда $x = f(1) = gi(1) = gi(n)/n = x$, откуда $nx = gi(n)$.
($\Leftarrow$)
Теперь $G$ --- делимая группа. $i : A \to B$ --- мономорфизм и $\varphi: A\to G$ --- какой-то морфизм, который мы хотим поднять. Приведём следующую конструкцию. Рассмотрим множество расширений $(A', \varphi')$ нашего морфизма: $A \subset A' \subset B$, $\varphi'|_A = \varphi$. На данном множестве введём частичный порядок: $(A', \varphi') \le (A'', \varphi'')$ если $A'\subset A''$ и $\varphi''|_A' = \varphi'$. По лемме Цорна существует максимальный элемент $(B', \varphi_B)$. Покажем, что $B'=B$, тогда окажется, что $\varphi_B$ --- искомый морфизм.
Пусть $B'$ и $B$ не совпадают. Тогда существует $x\in B/B'$. Тут нам потребуется делимость $G$. Возможны два варианта.
\begin{itemize}
    \item Пусть $\forall n\in\Z$ $nx \notin B'$. Тогда полагая $\varphi_B(x) = 0$ получаем продолжение $\varphi_B$ на $<B', x>$, что противоречит максимальности.
    \item Пусть $\exists n\in \Z$ такой, что $nx\in B'$. Тогда $\varphi_B(nx) = g$, причем в силу делимости $G$ существует $g'\in G$ такое, что $ng' = g$. Полагая $\varphi_B(x) = g'$ снова получим продолжение, противоречащее максивальности.
\end{itemize}
\end{proof}
\begin{to_suj}
В категории $\Z$-модулей достаточно инъективных объектов.
\end{to_suj}
\begin{proof}
    Построение инъективного объекта для $M$ иллюстрируется диаграммой.
    {\color{red}Откуда мономорфизм M -> cokerf???}
    \begin{equation}
        \begin{tikzcd}
	{\Ker \pi} \\
	{\oplus \Z e_i} & {\oplus \Q e_i} \\
	M & {Coker f}
	\arrow[hook, from=2-1, to=2-2]
	\arrow["\pi"', two heads, from=2-1, to=3-1]
	\arrow[hook, from=1-1, to=2-1]
	\arrow["f"{description}, from=1-1, to=2-2]
	\arrow[two heads, from=2-2, to=3-2]
	\arrow[hook, from=3-1, to=3-2]
\end{tikzcd}
    \end{equation}
    Утверждение следует из следующего факта:
    {\color{red} Это бы доказать наверное...}
    \begin{to_suj}
    Факторгруппа делимой группы --- тоже делимая группа.
    \end{to_suj}
    Тогда $Coker f$ будет делимым объектом как фактор $\oplus \Q e_i$
\end{proof}
Остановимся в рассуждениях с инъективными и проективными объектами. Следующее определение является первым шагом к построению производной категории.
\begin{to_def}
Морфизм $f^\bullet:K^\bullet \to L^\bullet$ называется гомотопичным нулю $f\sim 0$, если существуют $h^n:K^n\to L^{n-1}$ такие, что $f^n = d^{n+1}\circ h^{n+1} + h^{n}\circ d^{n}$.
\begin{equation*}
    \begin{tikzcd}[sep=huge]
	{...} & {K^{i-1}} & {K^i} & {K^{i+1}} & {K^{i+2}} & {...} \\
	{...} & {L^{i-1}} & {L^i} & {L^{i+1}} & {L^{i+2}} & {...}
	\arrow[from=1-1, to=1-2]
	\arrow["{d_K^i}", from=1-2, to=1-3]
	\arrow["{d_K^{i+1}}", from=1-3, to=1-4]
	\arrow[from=1-5, to=1-6]
	\arrow[from=2-1, to=2-2]
	\arrow["{d_L^i}"', from=2-2, to=2-3]
	\arrow["{d_L^{i+1}}"', from=2-3, to=2-4]
	\arrow["{d_L^{i+2}}"', from=2-4, to=2-5]
	\arrow[from=2-5, to=2-6]
	\arrow["{f^{i-1}}"', from=1-2, to=2-2]
	\arrow["{f^i}"', from=1-3, to=2-3]
	\arrow["{f^{i+1}}"', from=1-4, to=2-4]
	\arrow["{f^{i+2}}", from=1-5, to=2-5]
	\arrow["{d_K^{i+2}}", from=1-4, to=1-5]
	\arrow["{h^i}"{description}, from=1-3, to=2-2]
	\arrow["{h^{i+1}}"{description}, from=1-4, to=2-3]
	\arrow["{h^{i+2}}"{description}, from=1-5, to=2-4]
\end{tikzcd}
\end{equation*}
Два отображения $f^\bullet$, $g^\bullet$ комплексов называются гомотопически эквивалентными $f\sim g$, если $f-g \sim 0$.
\end{to_def}
\begin{to_suj}
$ $
\begin{itemize}
    \item Гомотопные морфизмы образуют идеал. Если $f\sim 0$, то для любых компонуемых с ним морфизмов $g, h$ верно $gf\sim 0$, $fh\sim 0$.
    \item Гомотопически эквивалентные морфизмы комплексов индуцируют одинаковые морфизмы на когомологиях.
\end{itemize}
\end{to_suj}
\begin{proof}
Для ясности не обозначая индексов приведём для первого пункта следующие выкладки.
\begin{equation*}
        gf = g(hd + dh) = ghd + gdh = ghd + dgh,
\end{equation*}
где последнее равенство сделано из коммутативности дифференциалов с морфизмами комплексов. Тогда $gh$ --- морфизм, из которого следует гомотопичность нулю.
Для второго пункта в силу линейности достаточно доказать, что гомотопное нулю отображение индуцирует нулевое отображение на когомологиях. Пусть $x\in \Ker d_K^{i+1}$. Тогда
    \begin{equation*}
        f^i(x) = d_L^{i}h^{i}(x) + h^{i+1}d_L^{i+1}(x),
    \end{equation*}
    где первый член в когомологиях будет равен нулю, т. к. $d_L^{i}h^{i}(x)\in Imd_L^{i}$, а второй --- т. к. дифференциал действует на элемент из ядра.
\end{proof}
Теперь заменим все наши морфизмы на соответствующие классы эквивалентности по отношению гомотопности и получим новую категорию.
\begin{to_def}
Гомотопичесокой категорией $\K\A$ называется категория с объектами из $Kom(\A)$ и морфизмами $\Hom_{\K\A} (K^\bullet, L^\bullet) = \Hom_{Kom(\A)} (K^\bullet, L^\bullet)/\sim$.
\end{to_def}
{\color{red}??? Добавить доказательство в приложение}
\begin{to_suj}[Лемма о зигзаге]
Пусть есть короткая точная последовательность.
\begin{equation*}
    \begin{tikzcd}
	0 & {K^\bullet} & {L^\bullet} & {M^\bullet} & 0
	\arrow[from=1-1, to=1-2]
	\arrow["f", from=1-2, to=1-3]
	\arrow["g", from=1-3, to=1-4]
	\arrow[from=1-4, to=1-5]
\end{tikzcd}
\end{equation*}
Тогда существуют связующие гомоморфизмы $\delta^i: H^i(M^\bullet) \to H^{i+1}(K^\bullet)$, делающие следующую последовательность точной.
\begin{equation*}
    \begin{tikzcd}
	&& \ldots \\
	{H^{i-1}(K^\bullet)} & {H^{i-1}(L^\bullet)} & {H^{i-1}(M^\bullet)} \\
	{H^i(K^\bullet)} & {H^i(L^\bullet)} & {H^i(M^\bullet)} \\
	{H^{i+1}(K^\bullet)} & {H^{i+1}(L^\bullet)} & {H^{i+1}(M^\bullet)} \\
	\ldots
	\arrow[from=1-3, to=2-1]
	\arrow["{f^*}"', from=2-1, to=2-2]
	\arrow["{g^*}", from=2-2, to=2-3]
	\arrow["{\delta^{i-1}}"{description}, from=2-3, to=3-1]
	\arrow["{f^*}"', from=3-1, to=3-2]
	\arrow["{g^*}", from=3-2, to=3-3]
	\arrow["{\delta^i}"{description}, from=3-3, to=4-1]
	\arrow["{f^*}"', from=4-1, to=4-2]
	\arrow["{g^*}", from=4-2, to=4-3]
	\arrow[from=4-3, to=5-1]
\end{tikzcd}
\end{equation*}
\end{to_suj}
{\color{red}a?}
\begin{to_def}
Пусть даны два комплекса $K^\bullet$ и $\L^\bullet$ над $\A$. Морфизмом комплексов называется комплекс с объектами $\hHom (K^\bullet, L^\bullet)^i = \prod_n \Hom(K^n, L^{n+1})$. Дифференциал на нём будет действовать следующим образом. Элемент из члена $i$ нашего комплекса можно представить как набор морфизмов $(\ldots, f_{-1}, f_0, f_1, \ldots)$, действующих между членами $K^\bullet$ и $L^\bullet$, отстоящих друг от друга на $i$. Тогда набор новых $(g_n)_{n\in\Z}$ в $i+1$-м члене получим как:
\begin{equation*}
    d^i: f_n \to g_n = df_n - (-1)^if_{n+1}d
\end{equation*}
\end{to_def}
\end{document}